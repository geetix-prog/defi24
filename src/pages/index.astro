---
import Layout from "../layouts/Layout.astro";
import Decompte from "../components/decompte.astro";
import Tag from "../components/Tag.astro";
import Button from "../components/Button.astro";
import Marquee from "../components/Banniere.astro";
import Classement from "../components/Classement.astro";
import { getallPartenaires } from "../../backend/backend.mjs";
const partenaires = await getallPartenaires();
---

<!-- avant event

<Layout 
	title="D√©fi 24h - L'√©v√©nement incontournable du cursus MMI | 09 janvier 2026"
	description="Participez au D√©fi 24H le 09 janvier 2026 ! 24 heures non-stop pour cr√©er, imaginer et repousser vos limites sur un th√®me surprise. Design, d√©veloppement, montage : tout le monde a sa place !"
	keywords="d√©fi 24h, MMI, cr√©ation, design, d√©veloppement, √©v√©nement √©tudiant, challenge cr√©atif, 24 heures, concours cr√©atif, inscription, 09 janvier 2026"
	canonical="/"
>
	<div class="flex flex-col space-y-15 justify-center items-center mt-25 lg:mt-40 px-4">
		<h1
			class="text-white font-oi text-center text-5xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight sm:leading-tight md:leading-normal tracking-wide">
			Le d√©fi 24H <br>C'est bient√¥t !
		</h1>
		<div class="flex flex-col space-y-7">
			<Tag bgClass="bg-tertiary" colorClass="text-white" text="09 JANVIER 2026" />
			<div class="text-center px-10">
				<a id="inscriptionBtn" href="/inscription" class="inline-block bg-white text-primary px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-full font-nohemi font-black text-base sm:text-lg shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] hover:scale-105 active:scale-95 transition-transform duration-150 ease-in text-center cursor-pointer">
					Inscription
				</a>
			</div>
		</div>
	</div>
	<div class="mt-25">
		<Marquee />
	</div>
	<div class="flex flex-col items-center mt-25 space-y-15">
		<div class="space-y-5 flex flex-col items-center">
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<h2 class="font-oi uppercase text-primary text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl">24
					heures</h2>
				<p
					class="font-nohemi text-tertiary text-xl sm:text-2xl md:text-2xl lg:text-3xl xl:text-3xl font-normal">
					Pour cr√©er, rire... et ne pas dormir !</p>
			</div>
			<div class="w-8/10 flex flex-col lg:flex-row gap-5 lg:items-stretch">
				<div
					class="space-y-2 lg:space-y-5 w-full bg-white/80 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<p class="font-nohemi text-black text-sm sm:text-base md:text-lg font-normal">
					Le D√©fi 24H, c'est l'√©v√©nement incontournable du cursus MMI : 24 heures non-stop pour cr√©er,
					imaginer et repousser vos limites sur un th√®me surprise. Que vous soyez fan de design, de
					montage,
					de d√©veloppement ou juste l√† pour l'ambiance (et les pizzas), tout le monde a sa place !</p>
				</div>
				<div
					class="space-y-2 lg:space-y-5 w-full bg-gradient-to-b from-[#FFC567] to-[#FD5A46] px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex justify-center items-center">
					<p class="font-nohemi text-white text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl">Pr√™t √† relever le challenge ?
					</p>
				</div>
			</div>
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<p class="font-nohemi text-black text-sm sm:text-base md:text-lg font-normal">
					Au D√©fi 24H, on joue en √©quipe ! Regroupe 4 ou 5 g√©nies cr√©atifs (ou juste tes potes, √ßa marche aussi) et pr√©pare-toi √† vivre une aventure intense.
				</p>
			</div>
		</div>
	</div>
	<div class="flex justify-center w-full mt-20">
		<Button bgClass="bg-white" colorClass="text-primary" text="Former mon √©quipe" page="equipe" />
	</div>
	<div class="mt-25 flex flex-col mx-auto w-8/10 space-y-5 lg:space-y-10">
		<div
			class="inline-block space-y-2 lg:space-y-5 bg-lightprimary w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
			<h2 class="font-oi uppercase text-white text-2xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl">Nos<br>partenaires</h2>
		</div>
		<div class="flex flex-col lg:grid lg:grid-cols-4 gap-5 w-full">
			{partenaires.map((partenaire) => (
			<a href={partenaire.lien} class="space-y-2 hover:-translate-y-2 transition-all ease-in lg:space-y-5 bg-white w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex flex-col justify-center items-center">
				<img src={partenaire.img} alt={partenaire.nom} class="max-h-24 sm:max-h-28 md:max-h-32 lg:max-h-36 object-contain" />
				<p>{partenaire.nom}</p>
			</a>
			))}
		</div>
	</div>
	<div class="space-y-2 lg:space-y-5 bg-white/80 w-8/10 lg:w-5/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex flex-col items-center mx-auto mt-25">
		<p class="font-nohemi text-primary text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl">Une question ? Besoin d'infos ?</p>
		<h2 class="font-oi uppercase text-tertiary text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-center">Contactez-nous !</h2>
		<Button bgClass="bg-primary" colorClass="text-white" text="Envoyer un message" page="contact" />
	</div>
</Layout> -->

<Layout
	title="D√©fi 24h - L'√©v√©nement incontournable du cursus MMI | 09 janvier 2026"
	description="Participez au D√©fi 24H le 09 janvier 2026 ! 24 heures non-stop pour cr√©er, imaginer et repousser vos limites sur un th√®me surprise. Design, d√©veloppement, montage : tout le monde a sa place !"
	keywords="d√©fi 24h, MMI, cr√©ation, design, d√©veloppement, √©v√©nement √©tudiant, challenge cr√©atif, 24 heures, concours cr√©atif, inscription, 09 janvier 2026"
	canonical="/"
>
	<style>
		body {
			background-color: var(--color-primary);
		}
	</style>
	<div class="flex flex-col space-y-8 justify-center items-center mt-25 lg:mt-40 px-4">
		<div
			class="inline-block bg-white px-3 sm:px-4 md:px-5 py-1 sm:py-1.5 md:py-2 rounded-xl font-nohemi font-black text-xs sm:text-sm lg:text-base shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] text-center"
			>
			<p class="uppercase">
				üî¥ En direct
			</p>
		</div>	
		<h1
			class="text-white font-oi text-center text-5xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight sm:leading-tight md:leading-normal tracking-wide">
			C‚Äôest parti!
		</h1>
		<p class="font-nohemi text-white text-xs sm:text-sm md:text-base lg:text-lg">Le D√©fi24 est en cours... Que le meilleur gagne ! üî•</p>
		<Decompte />
		<Classement />

		<div class="flex flex-col space-y-7">
			<Tag bgClass="bg-tertiary" colorClass="text-white" text="09 JANVIER 2026" />
			<div class="text-center px-10">
				<a id="inscriptionBtn" href="/inscription" class="inline-block bg-white text-primary px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-full font-nohemi font-black text-base sm:text-lg shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] hover:scale-105 active:scale-95 transition-transform duration-150 ease-in text-center cursor-pointer">
					Inscription
				</a>
			</div>
		</div>
	</div>
	<div class="mt-25">
		<Marquee />
	</div>
	<div class="flex flex-col items-center mt-25 space-y-15">
		<div class="space-y-5 flex flex-col items-center">
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<h2 class="font-oi uppercase text-primary text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl">24
					heures</h2>
				<p
					class="font-nohemi text-tertiary text-xl sm:text-2xl md:text-2xl lg:text-3xl xl:text-3xl font-normal">
					Pour cr√©er, rire... et ne pas dormir !</p>
			</div>
			<div class="w-8/10 flex flex-col lg:flex-row gap-5 lg:items-stretch">
				<div
					class="space-y-2 lg:space-y-5 w-full bg-white/80 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<p class="font-nohemi text-black text-sm sm:text-base md:text-lg font-normal">
					Le D√©fi 24H, c'est l'√©v√©nement incontournable du cursus MMI : 24 heures non-stop pour cr√©er,
					imaginer et repousser vos limites sur un th√®me surprise. Que vous soyez fan de design, de
					montage,
					de d√©veloppement ou juste l√† pour l'ambiance (et les pizzas), tout le monde a sa place !</p>
				</div>
				<div
					class="space-y-2 lg:space-y-5 w-full bg-gradient-to-b from-[#FFC567] to-[#FD5A46] px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex justify-center items-center">
					<p class="font-nohemi text-white text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl">Pr√™t √† relever le challenge ?
					</p>
				</div>
			</div>
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<p class="font-nohemi text-black text-sm sm:text-base md:text-lg font-normal">
					Au D√©fi 24H, on joue en √©quipe ! Regroupe 4 ou 5 g√©nies cr√©atifs (ou juste tes potes, √ßa marche aussi) et pr√©pare-toi √† vivre une aventure intense.
				</p>
			</div>
		</div>
	</div>
	<div class="flex justify-center w-full mt-20">
		<Button bgClass="bg-white" colorClass="text-primary" text="Former mon √©quipe" page="equipe" />
	</div>
	<div class="mt-25 flex flex-col mx-auto w-8/10 space-y-5 lg:space-y-10">
		<div
			class="inline-block space-y-2 lg:space-y-5 bg-lightprimary w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
			<h2 class="font-oi uppercase text-white text-2xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl">Nos<br>partenaires</h2>
		</div>
		<div class="flex flex-col lg:grid lg:grid-cols-4 gap-5 w-full">
			{partenaires.map((partenaire) => (
			<a href={partenaire.lien} class="space-y-2 hover:-translate-y-2 transition-all ease-in lg:space-y-5 bg-white w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex flex-col justify-center items-center">
				<img src={partenaire.img} alt={partenaire.nom} class="max-h-24 sm:max-h-28 md:max-h-32 lg:max-h-36 object-contain" />
				<p>{partenaire.nom}</p>
			</a>
			))}
		</div>
	</div>
	<div class="space-y-2 lg:space-y-5 bg-white/80 w-8/10 lg:w-5/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex flex-col items-center mx-auto mt-25">
		<p class="font-nohemi text-primary text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl">Une question ? Besoin d'infos ?</p>
		<h2 class="font-oi uppercase text-tertiary text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-center">Contactez-nous !</h2>
		<Button bgClass="bg-primary" colorClass="text-white" text="Envoyer un message" page="contact" />
	</div>
</Layout>

<script>
	const userDataString = localStorage.getItem('user');

	if (userDataString) {
		try {
			const userData = JSON.parse(userDataString);
			if (userData.email) {
				const avatarImg = document.createElement("img");
				avatarImg.src = userData.avatar;
				avatarImg.alt = "Avatar";
				
				
				const inscriptionBtn = document.getElementById('inscriptionBtn') as HTMLAnchorElement;
				if (inscriptionBtn) {
					inscriptionBtn.href = 'https://my.weezevent.com/defi-24h-2026';
					inscriptionBtn.textContent = 'Billetterie';
					inscriptionBtn.target = '_blank';
					inscriptionBtn.rel = 'noopener noreferrer';
				}
			}
		} catch (error) {
			console.error('Erreur lors de la lecture des donn√©es utilisateur', error);
		}
	}
	
	// Gestion du changement de couleur de fond
	const savedColor = localStorage.getItem('bgColor');
	if (savedColor) {
		document.documentElement.style.backgroundColor = savedColor;
		document.body.style.backgroundColor = savedColor;
	}
	
	const colorOptions = document.querySelectorAll('.color-option');
	const customColorPicker = document.getElementById('customColorPicker') as HTMLInputElement;
	
	function updateBackgroundColor(color: string) {
		document.documentElement.style.backgroundColor = color;
		document.body.style.backgroundColor = color;
		localStorage.setItem('bgColor', color);
		
		// Mise √† jour de l'√©tat actif
		colorOptions.forEach(option => {
			if ((option as HTMLElement).dataset.color === color) {
				option.classList.add('active');
			} else {
				option.classList.remove('active');
			}
		});
		
		customColorPicker.value = color;
	}
	
	colorOptions.forEach(option => {
		option.addEventListener('click', () => {
			const color = (option as HTMLElement).dataset.color!;
			updateBackgroundColor(color);
		});
	});
	
	customColorPicker.addEventListener('input', (e) => {
		const color = (e.target as HTMLInputElement).value;
		updateBackgroundColor(color);
		// Enlever l'√©tat actif de toutes les options pr√©d√©finies
		colorOptions.forEach(option => option.classList.remove('active'));
	});
</script>