---
import Layout from "../layouts/Layout.astro"
import Decompte from "../components/decompte.astro"
import Tag from "../components/Tag.astro"
import Button from "../components/Button.astro"
import Marquee from "../components/Banniere.astro"
import { getallPartenaires } from "../../backend/backend.mjs";
const partenaires = await getallPartenaires();
---

<Layout>
	<div class="flex flex-col space-y-15 justify-center items-center mt-25 px-4">
		<h1
			class="text-white font-oi text-center text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight sm:leading-tight md:leading-normal tracking-wide">
			Le défi 24h <br>C'est bientôt !
		</h1>
		<div class="flex flex-col space-y-7">
			<Tag bgClass="bg-tertiary" colorClass="text-white" text="17 JANVIER 2026" />
			<div class="text-center px-10">
				<Button bgClass="bg-white" colorClass="text-primary" text="Inscription" page="inscription" />
			</div>
		</div>
	</div>
	<div class="mt-25">
		<Marquee />
	</div>
	<div class="flex flex-col items-center mt-25 space-y-15">
		<div class="space-y-5 flex flex-col items-center">
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<h2 class="font-oi uppercase text-primary text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl">24
					heures</h2>
				<p
					class="font-nohemi text-tertiary text-xl sm:text-2xl md:text-2xl lg:text-3xl xl:text-3xl font-normal">
					Pour créer, rire... et ne pas dormir !</p>
			</div>
			<div class="w-8/10 flex flex-col lg:flex-row gap-5 lg:items-stretch">
				<div
					class="space-y-2 lg:space-y-5 w-full bg-white/80 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
					<p class="font-nohemi text-black text-[16px] lg:text-lg font-normal">
						Le Défi 24H, c'est l'événement incontournable du cursus MMI : 24 heures non-stop pour créer,
						imaginer et repousser vos limites sur un thème surprise. Que vous soyez fan de design, de
						montage,
						de développement ou juste là pour l'ambiance (et les pizzas), tout le monde a sa place !</p>
				</div>
				<div
					class="space-y-2 lg:space-y-5 w-full bg-gradient-to-b from-[#FFC567] to-[#FD5A46] px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex justify-center items-center">
					<p class="font-nohemi text-white md:text-xl lg:text-2xl xl:text-3xl">Prêt a relever le challenge ?
					</p>
				</div>
			</div>
			<div
				class="inline-block space-y-2 lg:space-y-5 bg-white/80 w-8/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<p class="font-nohemi text-black text-[16px] lg:text-lg font-normal">
					Au Défi 24H, on joue en équipe ! Regroupe 4 ou 5 génies créatifs (ou juste tes potes, ça marche
					aussi),
					et prépare-toi à vivre une aventure intense. Chacun apporte ses talents, que ce soit pour le design,
					le
					montage ou simplement pour encourager. Une seule règle : pas plus de 5, sinon c'est la révolution !
				</p>
			</div>
		</div>
		<div class="flex space-x-10">
			<Button bgClass="bg-primary" colorClass="text-white" text="Créer mon équipe" page="inscription" />
			<Button bgClass="bg-white" colorClass="text-primary" text="Intégrer une équipe" page="inscription" />
		</div>
	</div>
	<div class="mt-25 flex flex-col mx-auto w-8/10 space-y-10">
		<div
			class="inline-block space-y-2 lg:space-y-5 bg-lightprimary w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
			<h2 class="font-oi uppercase text-white text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl">Nos<br>partenaires</h2>
		</div>
		<div class="grid grid-cols-4 gap-5 w-full">
			{partenaires.map((partenaire) => (
			<div class="inline-block space-y-2 lg:space-y-5 bg-white w-full px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
				<img src={partenaire.img} alt={partenaire.nom} class="max-h-16 object-contain" />
			</div>
			))}
		</div>
	</div>
	<div class="space-y-2 lg:space-y-5 bg-white/80 w-5/10 px-6 sm:px-8 md:px-10 py-7 md:py-10 lg:py-15 rounded-2xl font-nohemi shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] flex flex-col items-center mx-auto mt-25">
		<p class="font-nohemi text-primary text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl">Une question ? Besoin d'infos ?</p>
		<h2 class="font-oi uppercase text-tertiary text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl text-center">Contactez-nous !</h2>
		<Button bgClass="bg-primary" colorClass="text-white" text="Envoyer un message" page="contact" />
	</div>
</Layout>

<script>
	const userDataString = localStorage.getItem('user');

	if (userDataString) {
		try {
			const userData = JSON.parse(userDataString);
			if (userData.email) {
				const avatarImg = document.createElement("img");
				avatarImg.src = userData.avatar;
				avatarImg.alt = "Avatar";
			}
		} catch (error) {
			console.error('Erreur lors de la lecture des données utilisateur', error);
		}
	}
</script>