---
import Layout from "../layouts/Layout.astro";
---

<Layout>
    <div class="flex flex-col items-center justify-center min-h-screen px-4">
        <div class="bg-white/80 w-full max-w-md p-8 rounded-2xl shadow-[0_0_0_3px_black,4px_4px_0px_2px_black]">
            <h1 class="font-oi text-primary text-4xl md:text-5xl text-center mb-6">Déconnexion</h1>
            
            <div id="message" class="text-center font-nohemi text-lg mb-6"></div>
            
            <div class="flex justify-center">
                <a 
                    href="/" 
                    class="inline-block bg-primary text-white px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-full font-nohemi font-black text-base sm:text-lg shadow-[0_0_0_2px_black,3px_3px_0px_1px_black] sm:shadow-[0_0_0_3px_black,4px_4px_0px_2px_black] hover:scale-105 active:scale-95 transition-transform duration-150 ease-in text-center"
                >
                    Retour à l'accueil
                </a>
            </div>
        </div>
    </div>
</Layout>

<script>
    const messageDiv = document.getElementById('message') as HTMLDivElement;

    // Déconnexion automatique au chargement de la page
    window.addEventListener('DOMContentLoaded', () => {
        // Supprimer les données de l'utilisateur du localStorage
        localStorage.removeItem('token');
        localStorage.removeItem('user');
        
        messageDiv.textContent = 'Vous avez été déconnecté avec succès.';
        messageDiv.style.color = 'green';
        
        // Redirection automatique après 2 secondes
        setTimeout(() => {
            window.location.href = '/';
        }, 2000);
    });
</script>
